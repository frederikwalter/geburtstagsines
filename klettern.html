<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kletterei</title>
    <!-- Link to Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="container">
        <div class="row justify-content-center align-items-center min-vh-100">
            <div class="col-md-8">
                <div class="content text-center  mb-5">
                    <h1 class="display-4">Kletterei</h1>
                    <p>Lass uns zusammen klettern gehen. Ich habe auch schon ganz viele tolle Routen gefunden, die wir zusammen machen können!</p>
                    <ul class="text-left">
                        <li>Bärnhofer Wand - Waldrausch</li>
                        <li>Kleine Wacht - Plattensprint</li>
                        <li>Breitenstein - Sind so kleine Leisten</li>
                        <li>Haselstaudener Wände - Botanikerverschneidung</li>
                        <li>Hartfels - Ab du Fisch</li>
                        <li>Schmidtstadter Wand - Weißglut</li>
                        <li>Weissenstein - Zwischenfall</li>
                        <li>Veldener Wand - Tanz der Vampire</li>
                        <li>Betzensteiner Sportkletterwand - Hexenmeister</li>
                        <li>Rodenstein - Edelweißriss</li>
                        <li>Strahlenfels - Zeit im Wandel</li>
                        <li>Ankatalwand - Frankengold</li>
                        <li>Zehnerstein - Westriss</li>
                        <li>Wachbergfelsen Hauptwand - Der Frosch mit der Maske</li>
                        <li>Schlaraffenland - Nice freshly baked</li>
                        <li>Glatzenstein - Sex mit Graut</li>
                        <li>Kirchthalwände - Muttersöhne</li>
                    </ul>
                    <!-- Text input and submit button -->
                    <form id="kletternForm">
                        <div class="form-group mt-3">
                            <input type="text" id="textInput" class="form-control" placeholder="Lösungswort">
                        </div>
                        <button type="button" id="submitBtn" class="btn btn-primary">Hoch da!</button>
                    </form>
                    <div id="resultMessage" class="mt-3"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Link to Bootstrap JS and Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        const submitBtn = document.getElementById('submitBtn');
        const textInput = document.getElementById('textInput');
        const resultMessage = document.getElementById('resultMessage');

        const correctHash = '274588640143f3960c6a1cbac6ec34630e6ed4f1350e9dca132bcd5246dd3cc5';

        // Funktion zum Hashen eines Strings mit SHA-256
        async function hashString(str) {
            const encoder = new TextEncoder();
            const data = encoder.encode(str);
            const hash = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hash));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        async function handleSubmission(event) {
            if (event) event.preventDefault();
            const inputText = textInput.value.toLowerCase().trim().replace(/\s+/g, '');
            try {
                const inputHash = await hashString(inputText);
                if (inputHash === correctHash) {
                    resultMessage.innerHTML = '<div class="alert alert-success mt-3">Richtig gut! Einfach alle Routen durchgezogen. Das kann sich echt sehen lassen. Aber jetzt brauchen wir endlich was zum Essen! Aber was nur essen? Mir ist letztens was unter das Sofa gerollt. Vielleicht ist das ja noch gut und essbar? </div>';
                    submitBtn.style.display = 'none';
                } else {
                    resultMessage.innerHTML = '<div class="alert alert-danger mt-3">Da müssen wir wohl nochmal reingehen... </div>';
                }
            } catch (error) {
                console.error('Fehler beim Hashen:', error);
                resultMessage.innerHTML = '<div class="alert alert-danger mt-3">Ein Fehler ist aufgetreten.</div>';
            }
        }

        submitBtn.addEventListener('click', handleSubmission);
        document.getElementById('kletternForm').addEventListener('submit', handleSubmission);
    </script>
</body>

</html>